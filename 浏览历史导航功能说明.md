# 浏览历史导航功能说明

## ✅ 功能概述

实现了类似浏览器的前进后退导航功能，让您在查看不同产品和文件夹时可以快速返回之前的浏览位置。

---

## 🎯 使用方法

### **1. UI 按钮（工具栏左侧）** 🖱️

在工具栏最左侧有两个导航按钮：

```
[←] [→] | 新建产品  导入文件  按日期
 ↑   ↑
后退 前进
```

**特点**：
- ✅ 灰色 = 不可用（没有历史记录）
- ✅ 正常 = 可以点击
- ✅ 鼠标悬停显示快捷键提示

---

### **2. 键盘快捷键** ⌨️

- **后退**: `Alt + ←` (Alt + 左箭头)
- **前进**: `Alt + →` (Alt + 右箭头)

**使用场景**：
```
查看 CD001 → 查看 CD002 → 查看 CD003
按 Alt + ← → 返回 CD002
按 Alt + ← → 返回 CD001
按 Alt + → → 前进到 CD002
```

---

### **3. 鼠标侧键** 🖱️

如果您的鼠标有侧键（多功能鼠标）：

- **后退**: 鼠标侧键 4 (通常是后退键)
- **前进**: 鼠标侧键 5 (通常是前进键)

**支持的鼠标**：
- 罗技 MX Master 系列
- 微软 Arc 鼠标
- 雷蛇游戏鼠标
- 大多数带侧键的办公/游戏鼠标

---

## 📝 工作原理

### **历史记录**

系统会自动记录您的浏览历史：

1. **点击产品** → 记录产品位置
2. **打开子文件夹** → 记录文件夹位置
3. **切换查看** → 记录切换轨迹

**示例浏览历史**：
```
1. CD001 (产品列表)
2. CD001 → 参考图文件夹
3. CD001 → AI原图文件夹
4. CD002 (产品列表)
5. CD002 → 最终成品文件夹
   ↑
   当前位置

后退 → 回到 CD002 (产品列表)
后退 → 回到 CD001 → AI原图文件夹
前进 → 回到 CD002 (产品列表)
```

---

## 🔧 技术细节

### **历史记录限制**
- 最多保存 **50 条** 历史记录
- 超过 50 条，自动删除最早的记录

### **历史清空规则**
- ✅ 关闭工作区 → 清空历史
- ✅ 切换工作区 → 清空历史
- ✅ 关闭应用 → 历史不保存

### **记录内容**
```typescript
{
  productId: "CD001_20250101_...",  // 产品ID
  folderId: "ref_images",           // 子文件夹ID (可选)
  timestamp: 1234567890123          // 时间戳
}
```

---

## 💡 使用技巧

### **1. 快速浏览多个产品**
```
查看 → CD001 
查看 → CD002
查看 → CD003
快速后退 (Alt + ←) 查看之前的产品
```

### **2. 在子文件夹间切换**
```
打开 CD001 → 参考图
        → AI原图
        → 最终成品
后退可以快速返回之前的文件夹
```

### **3. 配合搜索使用**
```
搜索 "蜡烛" → 查看结果1 → 查看结果2 → 查看结果3
使用后退快速回到之前查看的结果
```

---

## 🎨 UI 展示

### **按钮状态**

**可用状态**：
```
[←] [→]  ← 深色，可点击
```

**禁用状态**：
```
[←] [→]  ← 灰色，半透明
```

**悬停提示**：
```
鼠标移到按钮上：
  [←] → "后退 (Alt + ←)"
  [→] → "前进 (Alt + →)"
```

---

## 🚀 性能优化

1. **轻量级存储** - 只保存 ID，不保存完整数据
2. **自动清理** - 限制 50 条记录，避免内存泄漏
3. **高效更新** - 使用 Zustand 状态管理，最小化重渲染
4. **事件节流** - 避免频繁触发导航

---

## 📊 快捷键对比

| 操作 | 键盘快捷键 | 鼠标操作 | UI按钮 |
|------|-----------|---------|--------|
| 后退 | `Alt + ←` | 侧键 4 | [←] |
| 前进 | `Alt + →` | 侧键 5 | [→] |
| 效率 | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ |

---

## ⚠️ 注意事项

1. **不记录搜索**：搜索操作不会被记录到历史中
2. **工作区隔离**：每个工作区的历史独立，不共享
3. **关闭即清空**：关闭应用后，历史记录不会保存
4. **删除产品**：如果产品被删除，相关历史记录仍存在但不可访问

---

## 🔄 更新日志

**v1.0.0 - 2025-12-17**
- ✅ 实现基础前进后退功能
- ✅ 添加 UI 按钮
- ✅ 支持键盘快捷键 (Alt + ←/→)
- ✅ 支持鼠标侧键
- ✅ 历史记录管理（50条限制）
- ✅ 状态持久化（Zustand）

---

**开发日期**: 2025-12-17
**开发者**: SuperTools Team

